(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/face/face"],{"0716":function(t,e,n){},"2d19":function(t,e,n){"use strict";(function(t){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var r=u(n("a34a")),a=n("879b");function u(t){return t&&t.__esModule?t:{default:t}}function o(t,e){return l(t)||s(t,e)||i(t,e)||c()}function c(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function i(t,e){if(t){if("string"===typeof t)return f(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?f(t,e):void 0}}function f(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function s(t,e){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(t)){var n=[],r=!0,a=!1,u=void 0;try{for(var o,c=t[Symbol.iterator]();!(r=(o=c.next()).done);r=!0)if(n.push(o.value),e&&n.length===e)break}catch(i){a=!0,u=i}finally{try{r||null==c["return"]||c["return"]()}finally{if(a)throw u}}return n}}function l(t){if(Array.isArray(t))return t}function d(t,e,n,r,a,u,o){try{var c=t[u](o),i=c.value}catch(f){return void n(f)}c.done?e(i):Promise.resolve(i).then(r,a)}function p(t){return function(){var e=this,n=arguments;return new Promise((function(r,a){var u=t.apply(e,n);function o(t){d(u,r,a,o,c,"next",t)}function c(t){d(u,r,a,o,c,"throw",t)}o(void 0)}))}}var v={data:function(){return{faceUrl:"",hasRes:!1,recaptureStatus:!1,showComfirm:!1}},onLoad:function(t){this.getFace()},methods:{getFace:function(){var t=this;return p(r.default.mark((function e(){var n;return r.default.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,(0,a.queryFace)();case 3:n=e.sent,n.value.frontFace&&(t.faceUrl=n.value.frontFace);case 5:return e.prev=5,t.hasRes=!0,e.finish(5);case 8:case"end":return e.stop()}}),e,null,[[0,,5,8]])})))()},error:function(e){return p(r.default.mark((function e(){var n,a,u;return r.default.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,t.getSetting();case 2:n=e.sent,a=o(n,2),a[0],u=a[1],u.authSetting["scope.camera"]||wx.showModal({title:"调用摄像机失败",content:"检测到您拒绝了授权，将无法进行人脸采集，是否去设置打开？",success:function(e){var n=e.confirm;n?t.openSetting({complete:function(t){}}):t.navigateBack()}});case 7:case"end":return e.stop()}}),e)})))()},shoot:function(){var e=this,n=t.createCameraContext();n.takePhoto({quality:"high",success:function(n){t.showToast({title:"头像采集成功"}),e.faceUrl=n.tempImagePath,e.recaptureStatus=!1,e.showComfirm=!0}})},confirm:function(){var e=this;return p(r.default.mark((function n(){var u;return r.default.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return t.showLoading({title:"正在上传头像"}),n.next=3,(0,a.get7nToken)();case 3:u=n.sent,e.upload(u.value.token);case 5:case"end":return n.stop()}}),n)})))()},upload:function(e){t.uploadFile({url:"https://up-z2.qiniup.com/",filePath:this.faceUrl,name:"file",formData:{token:e},success:function(){var e=p(r.default.mark((function e(n){var u,o,c;return r.default.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,u=JSON.parse(n.data),o=u.key,e.next=4,(0,a.editFace)({frontFace:o});case 4:c=getApp().globalData.returnPath,c?t.redirectTo({url:c,success:function(t){return getApp().globalData.returnPath=""}}):t.navigateBack(),e.next=11;break;case 8:e.prev=8,e.t0=e["catch"](0),console.log(e.t0);case 11:return e.prev=11,t.hideLoading(),e.finish(11);case 14:case"end":return e.stop()}}),e,null,[[0,8,11,14]])})));function n(t){return e.apply(this,arguments)}return n}()})}}};e.default=v}).call(this,n("543d")["default"])},"736b":function(t,e,n){"use strict";n.r(e);var r=n("2d19"),a=n.n(r);for(var u in r)"default"!==u&&function(t){n.d(e,t,(function(){return r[t]}))}(u);e["default"]=a.a},9691:function(t,e,n){"use strict";n.r(e);var r=n("d3b7"),a=n("736b");for(var u in a)"default"!==u&&function(t){n.d(e,t,(function(){return a[t]}))}(u);n("b308");var o,c=n("f0c5"),i=Object(c["a"])(a["default"],r["b"],r["c"],!1,null,"03b2347c",null,!1,r["a"],o);e["default"]=i.exports},b308:function(t,e,n){"use strict";var r=n("0716"),a=n.n(r);a.a},c8d6:function(t,e,n){"use strict";(function(t){n("7e8d");r(n("66fd"));var e=r(n("9691"));function r(t){return t&&t.__esModule?t:{default:t}}t(e.default)}).call(this,n("543d")["createPage"])},d3b7:function(t,e,n){"use strict";var r;n.d(e,"b",(function(){return a})),n.d(e,"c",(function(){return u})),n.d(e,"a",(function(){return r}));var a=function(){var t=this,e=t.$createElement;t._self._c;t._isMounted||(t.e0=function(e){t.recaptureStatus=!0})},u=[]}},[["c8d6","common/runtime","common/vendor"]]]);